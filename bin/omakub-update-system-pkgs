#!/bin/bash

set -e

echo -e "\e[32m\nUpdate system packages\e[0m"
sudo apt update
sudo apt -y upgrade
sudo apt -y dist-upgrade

# Se ci sono pacchetti non piÃ¹ necessari, rimuovili
if [[ $(sudo apt -s autoremove 2>/dev/null | grep 'The following packages will be REMOVED:' | wc -l) -gt 0 ]]; then
  echo -e "\e[32m\nRemoving unnecessary packages\e[0m"
  sudo apt -y autoremove
fi

# If Flatpak is installed, update Flatpak packages
if ! command -v "flatpak --version" &> /dev/null; then
  echo -e "\e[32m\nUpdate flatpak packages\e[0m"
  flatpak update -y
fi
