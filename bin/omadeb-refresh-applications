#!/bin/bash

# Ensure all default .desktop, web apps, and TUIs are installed.

# Copy and sync icon files
mkdir -p ~/.local/share/icons/hicolor/48x48/apps/
cp ~/.local/share/omadeb/applications/desktop/icons/*.png ~/.local/share/icons/hicolor/48x48/apps/
gtk-update-icon-cache ~/.local/share/icons/hicolor &>/dev/null

# Copy .desktop declarations
mkdir -p ~/.local/share/applications
cp ~/.local/share/omadeb/applications/desktop/*.desktop ~/.local/share/applications/
cp ~/.local/share/omadeb/applications/desktop/hidden/*.desktop ~/.local/share/applications/

# Refresh the webapps and TUI
bash $OMADEB_PATH/install/packaging/icons.sh
bash $OMADEB_PATH/install/packaging/webapps.sh
bash $OMADEB_PATH/install/packaging/tuis.sh

update-desktop-database ~/.local/share/applications
