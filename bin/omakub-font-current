#!/bin/bash

# Returns the name of the current monospace font being used by extracting it from the terminal config.
# This can be changed using omakub-font-set.

CURRENT_TERMINAL=$(omakub-terminal-current)

if [ -z "$CURRENT_TERMINAL" ]; then
  echo "No terminal found"
  exit 1
fi

case "${CURRENT_TERMINAL,,}" in
  alacritty)
    grep -oP 'family\s*=\s*"\K[^"]+' ~/.config/alacritty/alacritty.toml | head -n1
    ;;
  kitty)
    grep -oP '^font_family\s+\K.*' ~/.config/kitty/kitty.conf | head -n1
    ;;
  *)
    echo "Unsupported terminal: $CURRENT_TERMINAL"
    exit 1
    ;;
esac